<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="苏瑾诺"><meta name="keywords" content="前端,vue,react,node"><meta name="description" content="我的技术博客"><link rel="alternative" href="/atom.xml" title="Nana's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Vuejs项目配置webpack将px自动转化为rem，适配移动端 - Nana's Blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">Nana's Blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-12-17T04:34:28.570Z">十二月 17, 2018</time><h1 class="post__title"><a href="/2018/12/17/Vuejs项目配置webpack将px自动转化为rem，适配移动端/">Vuejs项目配置webpack将px自动转化为rem，适配移动端</a></h1><div class="post__main echo"><p>本项目采用 iPhone 6 物理像素为 750px * 1334px 的设计稿</p>
<p><strong>rem兼容性</strong><br>先看看rem的兼容性，关于移动端<br>ios：6.1系统以上都支持<br>android：2.1系统以上都支持<br>大部分主流浏览器都支持，可以安心的往下看了</p>
<p><strong>rem基准值计算</strong><br> iPhone6的屏幕大小是375px，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1rem = window.innerWidth  / 10</span><br></pre></td></tr></table></figure></p>
<p>这样计算出来的rem基准值就是37.5（iphone6的视觉稿），这里为什么要除以10呢，其实这个值是随便定义的,因为不想让html的font-size太大，当然也可以选择不除，只要在后面动态js计算时保证一样的值就可以</p>
<p><strong>动态设置html的font-size</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.onresize = setHtmlFontSize</span><br><span class="line">function setHtmlFontSize () &#123;</span><br><span class="line">  const htmlWidth = document.documentElement.clientWidth || document.body.clientWidth</span><br><span class="line">  const htmlDom = document.getElementsByTagName(&apos;html&apos;)[0]</span><br><span class="line">  htmlDom.style.fontSize = htmlWidth / 10 + &apos;px&apos;</span><br><span class="line">&#125;</span><br><span class="line">setHtmlFontSize()</span><br></pre></td></tr></table></figure></p>
<p>但页面很大的时候，我们作的移动适配方案会呈现很大的字体，这不是我们想要的。所以加一个判断，解决页面字体过大的问题。<br> 在 index.html的script里加入判断页面的语句。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if ( htmlWidth &gt; 750) &#123; htmlWidth = 750 &#125;</span><br></pre></td></tr></table></figure></p>
<p>当然我们不能每次设置元素的时候，都要自己去算一下，这样就显得 low 了,有两种解决方案：</p>
<ol>
<li>前端构建中，完全可以利用scss来解决这个问题，例如我们可以写一个scss的function px2rem即：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@function px2rem($px)&#123;</span><br><span class="line">    $rem : 37.5px;</span><br><span class="line">    @return ($px/$rem) + rem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这样，当我们写具体数值的时候就可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">height: px2rem(90px);</span><br><span class="line">width: px2rem(90px);;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>配置一下webpack，自动转换px为对应的rem值<br><strong>配置 postcss-pxtorem 自动转换px为rem</strong></li>
</ol>
<ul>
<li><p>安装 postcss-pxtorem</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-pxtorem -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改根目录 .postcssrc.js 文件<br>找到 plugins 属性新增pxtorem的设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;postcss-pxtorem&quot;: &#123;</span><br><span class="line">  &quot;rootValue&quot;: 32,</span><br><span class="line">  &quot;propList&quot;: [&quot;*&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>按照上述配置项目后，即可在开发中直接使用 px 单位开发。<br>例如设计给出的设计图是 750 * 1334，那么可以直接在页面中写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">	width: 750px;</span><br><span class="line">	height: 1136px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>将被转换为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">	widht: 23.4375rem;</span><br><span class="line">	height: 35.5rem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：</p>
<ul>
<li>此方法支持import 和 .vue单文件中style。暂不支持style中使用@import url();</li>
<li><strong>怎么才能让某一个属性不转化成rem呢</strong>。。。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// `px` is converted to `rem`</span><br><span class="line">.convert &#123;</span><br><span class="line">    font-size: 16px; // converted to 1rem</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// `Px` or `PX` is ignored by `postcss-pxtorem` but still accepted by browsers</span><br><span class="line">.ignore &#123;</span><br><span class="line">    border: 1Px solid; // ignored</span><br><span class="line">    border-width: 2PX; // ignored</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>大致意思就是说：目前，忽略单个属性的最简单的方法是在像素单元声明中使用大写。<br>。。。原来这么简单，把px改成Px就行啦，亲测移动端PC端都没有问题。。。<br><img src="https://upload-images.jianshu.io/upload_images/5120924-a9a45e19bb2f9b22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2018080611534166.png"></p>
<p>另附配置项详细解释：</p>
<p>autoprefixer: 添加浏览器前缀<br>postcss-pxtorem：{<br>  rootValue:32:   根大小32<br>  propList： [ ]  属性的选择器，*表示通用<br>  selectorBlackList :  [ ]    忽略的选择器   .ig-  表示 .ig- 开头的都不会转换<br>}</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/vue/">vue</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/rem/">rem</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2017-2018 苏瑾诺</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>