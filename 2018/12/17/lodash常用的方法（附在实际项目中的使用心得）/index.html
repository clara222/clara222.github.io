<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="苏瑾诺"><meta name="keywords" content="前端,vue,react,node"><meta name="description" content="我的技术博客"><link rel="alternative" href="/atom.xml" title="Nana's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>lodash常用的方法（附在实际项目中的使用心得） - Nana's Blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">Nana's Blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-12-17T04:34:28.570Z">十二月 17, 2018</time><h1 class="post__title"><a href="/2018/12/17/lodash常用的方法（附在实际项目中的使用心得）/">lodash常用的方法（附在实际项目中的使用心得）</a></h1><div class="post__main echo"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const _ = require(&apos;lodash&apos;)</span><br></pre></td></tr></table></figure>
<ol>
<li>assign、merge<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const aa = _.assign(&#123;&#125;,&#123;a:1&#125;,&#123;a:2&#125;,&#123;b:3&#125;)</span><br><span class="line">//&#123;a:2,b:3&#125;</span><br><span class="line">const bb = _.merge(&#123;&#125;,&#123;a:1&#125;,&#123;a:2&#125;,&#123;b:3&#125;)</span><br><span class="line">//&#123;a:2,b:3&#125;</span><br><span class="line">const a1 = _.assign(&#123;&#125;,&#123;a:1&#125;,&#123;b:&#123;a:1,b:2&#125;&#125;,&#123;b:&#123;a:3&#125;&#125;)</span><br><span class="line">//&#123;a:1,b:&#123;a:3&#125;&#125;</span><br><span class="line"></span><br><span class="line">const a2 = _.merge(&#123;&#125;,&#123;a:1&#125;,&#123;b:&#123;a:1,b:2&#125;&#125;,&#123;b:&#123;a:3&#125;&#125;)</span><br><span class="line">//&#123;a:1,b:&#123;a:3,b:2&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>相同之处:</p>
<ul>
<li>都可以用来合并对象</li>
<li>都会修改原来的对象 (如果原来的对象是作为函数的第一个参数的话)<br>不同之处</li>
<li>assign 函数不会处理原型链上的属性，也不会合并相同的属性，而是用后面的属性值覆盖前面的属性值</li>
<li>merge 遇到相同属性名的时候，如果属性值是纯对象或集合的时候，会合并属性值</li>
</ul>
<ol start="2">
<li><p>mergeWith</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var object = &#123; &apos;a&apos;: [3], &apos;b&apos;: [5] &#125;;</span><br><span class="line">var other = &#123; &apos;a&apos;: [6], &apos;b&apos;: [7] &#125;;</span><br><span class="line">function foo (a,b) &#123;</span><br><span class="line">    if (_.isArray(a)) &#123;</span><br><span class="line">        return a.concat(b)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function foo5 (a,b) &#123;</span><br><span class="line">    return _.toNumber(a) + _.toNumber(b)</span><br><span class="line">&#125;</span><br><span class="line">const a3 = _.merge(object,other)</span><br><span class="line">//&#123;&apos;a&apos;:[6],&apos;b&apos;:[7]&#125;</span><br><span class="line">const a4 = _.mergeWith(object,other)</span><br><span class="line">//&#123;&apos;a&apos;:[6],&apos;b&apos;:[7]&#125;</span><br><span class="line">const a5 = _.mergeWith(object,other,foo)</span><br><span class="line">//&#123;&apos;a&apos;:[3,6],&apos;b&apos;:[5,7]&#125;</span><br><span class="line">const aaa = _.mergeWith(object,other,foo5)</span><br><span class="line">//&#123;&apos;a&apos;:9,&apos;b&apos;:12&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>sumBy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var arrs = [&#123; &apos;n&apos;: 4 &#125;, &#123; &apos;n&apos;: 2 &#125;, &#123; &apos;n&apos;: 8 &#125;, &#123; &apos;n&apos;: 6 &#125;];</span><br><span class="line">var a6 = _.sumBy(arrs, k =&gt; k.n)  //20</span><br><span class="line">var aa6 = _.sumBy(arrs,&apos;n&apos;)  //20</span><br><span class="line">// console.log(aa6);</span><br><span class="line"></span><br><span class="line">var ccc = _.sum([3,16,15,20])</span><br><span class="line">// console.log(ccc);</span><br></pre></td></tr></table></figure>
</li>
<li><p>sortBy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">var users = [</span><br><span class="line">    &#123; &apos;user&apos;: &apos;barney&apos;,  &apos;age&apos;: 36 &#125;,</span><br><span class="line">    &#123; &apos;user&apos;: &apos;fred&apos;,    &apos;age&apos;: 40 &#125;,</span><br><span class="line">    &#123; &apos;user&apos;: &apos;pebbles&apos;, &apos;age&apos;: 1 &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  var youngest = _</span><br><span class="line">  .chain(users)                         </span><br><span class="line">  .sortBy(&apos;age&apos;)</span><br><span class="line">  .value()</span><br><span class="line">  console.log(youngest);    </span><br><span class="line">//[ &#123; user: &apos;pebbles&apos;, age: 1 &#125;,</span><br><span class="line">// &#123; user: &apos;barney&apos;, age: 36 &#125;,</span><br><span class="line">// &#123; user: &apos;fred&apos;, age: 40 &#125; ]</span><br><span class="line">  </span><br><span class="line">// _.chain(arr)</span><br><span class="line">//   LodashWrapper &#123;</span><br><span class="line">//     __wrapped__:   [ &#123; user: &apos;barney&apos;, age: 36 &#125;,</span><br><span class="line">//        &#123; user: &apos;fred&apos;, age: 40 &#125;,</span><br><span class="line">//        &#123; user: &apos;pebbles&apos;, age: 1 &#125; ],</span><br><span class="line">//     __actions__: [],</span><br><span class="line">//     __chain__: true,</span><br><span class="line">//     __index__: 0,  __values__: undefined &#125;</span><br><span class="line">  var a7 = _.sortBy(users,&apos;age&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>flatten</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1,2,[3,4,[5],6]]</span><br><span class="line">var a8 = _.flatten(arr)  //[ 1, 2, 3, 4, [ 5 ], 6 ]</span><br><span class="line">var a9 = _.flattenDeep(arr)  //[ 1, 2, 3, 4, 5, 6 ]</span><br><span class="line">var a10 = _.flattenDepth(arr,2)  //[ 1, 2, 3, 4, 5, 6 ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr2 = [12,14,11,12,12,1,14,16,17,22,2,11,12]</span><br><span class="line">var a11 = Array.from(new Set(arr2))</span><br><span class="line">var a12 = [...new Set(arr2)]</span><br><span class="line">var a13 = _.uniq(arr2)  //[ 12, 14, 11, 1, 16, 17, 22, 2 ]</span><br><span class="line">var arrObj = [&#123; &apos;x&apos;: 1, &apos;y&apos;: 2 &#125;, &#123; &apos;x&apos;: 2, &apos;y&apos;: 1 &#125;,&#123; &apos;x&apos;: 2, &apos;y&apos;: 1 &#125;, &#123; &apos;x&apos;: 1, &apos;y&apos;: 2 &#125;];</span><br><span class="line">var a14 = _.uniqWith(arrObj, _.isEqual)  //[ &#123; x: 1, y: 2 &#125;, &#123; x: 2, y: 1 &#125; ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>isEqual</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var object = &#123; &apos;a&apos;: 1, &apos;b&apos;:2&#125;;</span><br><span class="line">var other = &#123; &apos;a&apos;: 1,&apos;b&apos;:2 &#125;;</span><br><span class="line"> </span><br><span class="line">var a15 = _.isEqual(object, other);  //true</span><br><span class="line"></span><br><span class="line">var a16 = _.isEqual([1,[2],2],[1,[2],2])  //true</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var a17 = _.random(1, 5,true);</span><br><span class="line">// console.log(a17);</span><br><span class="line">var a18 = _.inRange(5,1,10)  //true</span><br><span class="line"></span><br><span class="line">var a19 = _.clamp(90, 5, 100)  //90</span><br><span class="line"></span><br><span class="line">var a20 = _.min([14,12,11,15,14,22,10,34,12])  //10</span><br><span class="line"></span><br><span class="line">var objects = [&#123; &apos;n&apos;: 4 &#125;, &#123; &apos;n&apos;: 2 &#125;,&#123;&apos;n&apos;:5&#125;,&#123;&apos;n&apos;:3&#125;];</span><br><span class="line"> </span><br><span class="line">var a21 = _.minBy(objects,&apos;n&apos;)  //&#123; n: 2 &#125;   </span><br><span class="line">// _.maxBy()</span><br><span class="line">var a22 = _.minBy(objects,o =&gt; o.n)  //&#123; n: 2 &#125;</span><br><span class="line">console.log(a22);</span><br></pre></td></tr></table></figure>
</li>
<li><p>深拷贝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_.cloneDeep()</span><br><span class="line">var original = &#123; foo: &quot;bar&quot; &#125;;</span><br><span class="line">var newObj = _.cloneDeep(original)</span><br><span class="line">original.foo = &apos;aaa&apos;</span><br><span class="line">console.log(original);  //&#123; foo: &apos;aaa&apos; &#125;</span><br><span class="line">console.log(newObj);  //&#123; foo: &apos;bar&apos; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>浅拷贝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_.clone()</span><br><span class="line">var original1 = &#123; foo: &quot;bar&quot; &#125;;</span><br><span class="line">var newObj1 = _.clone(original)</span><br><span class="line">original1.foo = &apos;aaa&apos;</span><br><span class="line">console.log(original1);  //&#123; foo: &apos;aaa&apos; &#125;</span><br><span class="line">console.log(newObj1);  //&#123; foo: &apos;aaa&apos; &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>含sorted的方法接受有序数组</li>
<li>同名含By的方法额外接受一个迭代器参数</li>
<li>同名含Last的方法返回的是符合筛选条件元素的最后一个</li>
</ul>
<ol start="11">
<li>reduce</li>
</ol>
<ul>
<li>通过 iteratee 遍历集合中的每个元素。 每次返回的值会作为下一次 iteratee 使用。 </li>
<li>如果没有提供accumulator（第三个参数，即初始值），则集合中的第一个元素作为 accumulator。</li>
<li>常见的错误是忽略了返回结果(return result)和没有传入函数的第三个参数(默认值)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var users = [</span><br><span class="line">    &#123; name: &quot;John&quot;, age: 30 &#125;,</span><br><span class="line">    &#123; name: &quot;Jane&quot;, age: 28 &#125;,</span><br><span class="line">    &#123; name: &quot;Bill&quot;, age: 65 &#125;,</span><br><span class="line">    &#123; name: &quot;Emily&quot;, age: 17 &#125;,</span><br><span class="line">    &#123; name: &quot;Jack&quot;, age: 30 &#125;</span><br><span class="line">]</span><br><span class="line">var finalRes = _.reduce(users,(result,user) =&gt; &#123;</span><br><span class="line">    if (user.age &gt; 17 &amp;&amp; user.age&lt; 66) &#123;</span><br><span class="line">        (result[user.age] || (result[user.age] = [])).push(user)</span><br><span class="line">    &#125;</span><br><span class="line">    return result</span><br><span class="line">&#125;,&#123;&#125;)</span><br><span class="line">// &#123; &apos;28&apos;: [ &#123; name: &apos;Jane&apos;, age: 28 &#125;],</span><br><span class="line">//   &apos;30&apos;: [ &#123; name: &apos;John&apos;, age: 30 &#125;, &#123; name: &apos;Jack&apos;, age: 30 &#125; ], </span><br><span class="line">//   &apos;65&apos;: [ &#123; name: &apos;Bill&apos;, age: 65 &#125;] </span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="12">
<li>返回一个新的联合数组。去重<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var b1 = _.union([1],[1,2],[1,2,3],[3,6,9])  //[ 1, 2, 3, 6, 9 ] </span><br><span class="line">var bb2 = _.union([1,2,3,1,2,1,11,2,3])  //[ 1, 2, 3, 11 ]</span><br><span class="line">var b2 = _.unionBy([2.1], [1.2, 2.3,2.4,3.1], Math.floor);  //[ 2.1, 1.2, 3.1 ]</span><br><span class="line">var b3 = _.unionBy([&#123; &apos;x&apos;: 1 &#125;], [&#123; &apos;x&apos;: 2 &#125;, &#123; &apos;x&apos;: 1 &#125;,&#123;&apos;x&apos;:3&#125;],[&#123;&apos;x&apos;:2&#125;] ,&apos;x&apos;);</span><br><span class="line">//[ &#123; x: 1 &#125;, &#123; x: 2 &#125;, &#123; x: 3 &#125; ]</span><br><span class="line">var b4 = _.unionBy([&#123;&apos;x&apos;:1&#125;,&#123;&apos;x&apos;:2&#125;,&#123;&apos;x&apos;:3&#125;,&#123;&apos;x&apos;:3&#125;,&#123;&apos;x&apos;:1&#125;],&apos;x&apos;)</span><br><span class="line">//[ &#123; x: 1 &#125;, &#123; x: 2 &#125;, &#123; x: 3 &#125; ]</span><br><span class="line">var b5 = _.unionBy([&#123;&apos;x&apos;:1&#125;,&#123;&apos;x&apos;:2&#125;,&#123;&apos;x&apos;:3&#125;,&#123;&apos;x&apos;:3&#125;,&#123;&apos;x&apos;:1&#125;],a=&gt; a.x)</span><br><span class="line">//[ &#123; x: 1 &#125;, &#123; x: 2 &#125;, &#123; x: 3 &#125; ]</span><br><span class="line">var b6 = _.uniq([1],[1,2],[1,2,3],[3,6,9])  //1</span><br><span class="line">var b7 = _.uniq([1,2,3,1,2,1,11,2,3])  //[ 1, 2, 3, 11 ]</span><br><span class="line">var b8 = _.uniqBy([&#123; &apos;x&apos;: 2 &#125;, &#123; &apos;x&apos;: 1 &#125;,&#123;&apos;x&apos;:3&#125;,&#123;&apos;x&apos;:1&#125;,&#123;&apos;x&apos;:2&#125;],&apos;x&apos;)</span><br><span class="line">//[ &#123; x: 2 &#125;, &#123; x: 1 &#125;, &#123; x: 3 &#125; ]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>总结：union和uniq的区别：union支持多个数组去重，uniq只能是一个数组</p>
<ol start="13">
<li><p>fromPairs和toPairs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var b9 = _.fromPairs([[&apos;fred&apos;, 30], [&apos;barney&apos;, &apos;a&apos;],[&apos;some&apos;,1],[&apos;a&apos;,&apos;c&apos;]]);</span><br><span class="line">//&#123; fred: 30, barney: &apos;a&apos;, some: 1, a: &apos;c&apos; &#125;</span><br><span class="line">var b10 = _.toPairs(&#123;fred: 30, barney: &apos;a&apos;, some: 1, a: &apos;c&apos; &#125;)</span><br><span class="line">var b11 = Object.entries(&#123;fred: 30, barney: &apos;a&apos;, some: 1, a: &apos;c&apos; &#125;)</span><br><span class="line">//[ [ &apos;fred&apos;, 30 ], [ &apos;barney&apos;, &apos;a&apos; ], [ &apos;some&apos;, 1 ], [ &apos;a&apos;, &apos;c&apos; ] ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>mapValues</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var users = &#123;</span><br><span class="line">    &apos;fred&apos;:    &#123; &apos;user&apos;: &apos;fred&apos;,    &apos;age&apos;: 40 &#125;,</span><br><span class="line">    &apos;pebbles&apos;: &#123; &apos;user&apos;: &apos;pebbles&apos;, &apos;age&apos;: 1 &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">var c1 = _.mapValues(users,&apos;age&apos;)  //&#123; fred: 40, pebbles: 1 &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>pickBy</p>
</li>
</ol>
<ul>
<li>_.omit是pick的反向</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var object = &#123; &apos;a&apos;: 1, &apos;b&apos;: &apos;2&apos;, &apos;c&apos;: 3 &#125;;</span><br><span class="line">var c2 = _.pick(object,[&apos;a&apos;,&apos;c&apos;])  //&#123; a: 1, c: 3 &#125;</span><br><span class="line">var c3 = _.pickBy(object, _.isString)  //&#123; b: &apos;2&apos; &#125;</span><br><span class="line">console.log(c3);</span><br></pre></td></tr></table></figure>
<ol start="16">
<li>drop  </li>
</ol>
<ul>
<li>去除array前面的n个元素<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var c3 = _.drop([1, 2, 3], 2);  //[ 3 ]</span><br><span class="line">console.log(c3);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="17">
<li>shuffle()  </li>
</ol>
<ul>
<li>创建一个被打乱值的数组(随机打乱)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var c4 = _.shuffle([1,5,11,4,3,6])   //[ 1, 11, 6, 5, 3, 4 ]  [ 4, 6, 1, 3, 11, 5 ]</span><br><span class="line">var c5 = _.shuffle([[&apos;fred&apos;, 30], [&apos;barney&apos;, &apos;a&apos;],[&apos;some&apos;,1],[&apos;a&apos;,&apos;c&apos;]])  </span><br><span class="line">//[ [ &apos;some&apos;, 1 ], [ &apos;a&apos;, &apos;c&apos; ], [ &apos;barney&apos;, &apos;a&apos; ], [ &apos;fred&apos;, 30 ] ]</span><br><span class="line">var c6 = _.shuffle([&#123; &apos;user&apos;: &apos;fred&apos;&#125;,&#123;&apos;age&apos;: 40 &#125;,&#123; &apos;user&apos;: &apos;pebbles&apos;&#125;])</span><br><span class="line">//[ &#123; user: &apos;pebbles&apos; &#125;, &#123; age: 40 &#125;, &#123; user:&apos;fred&apos; &#125; ]</span><br><span class="line">console.log(c6);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="18">
<li>sample</li>
</ol>
<ul>
<li>随机获取数组中的某一项,attr2:随机获取的个数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var ccc = _.sample([&quot;lisong&quot;, &quot;heyan&quot;,&apos;A&apos;,&apos;C&apos;], 1);</span><br><span class="line">console.log(ccc);  //heyan</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="19">
<li><p>map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let ownerArr = [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;owner&quot;: &quot;Colin&quot;,</span><br><span class="line">        &quot;pets&quot;: [&#123;&quot;name&quot;:&quot;dog1&quot;&#125;, &#123;&quot;name&quot;: &quot;dog2&quot;&#125;]</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        &quot;owner&quot;: &quot;John&quot;,</span><br><span class="line">        &quot;pets&quot;: [&#123;&quot;name&quot;:&quot;dog3&quot;&#125;, &#123;&quot;name&quot;: &quot;dog4&quot;&#125;]</span><br><span class="line">    &#125;];</span><br><span class="line">console.log(_.map(ownerArr, &apos;pets[1].name&apos;)); // 循环找寻深度数组的值 [ &apos;dog2&apos;, &apos;dog4&apos; ]</span><br><span class="line">console.log(_.map(ownerArr,o=&gt;o.pets[1].name))  // [ &apos;dog2&apos;, &apos;dog4&apos; ]</span><br><span class="line"></span><br><span class="line">var users = [</span><br><span class="line">    &#123; &apos;user&apos;: &apos;barney&apos; &#125;,</span><br><span class="line">    &#123; &apos;user&apos;: &apos;fred&apos; &#125;</span><br><span class="line">  ];</span><br><span class="line">   </span><br><span class="line"> var c7 =  _.map(users, &apos;user&apos;);  //[ &apos;barney&apos;, &apos;fred&apos; ]</span><br><span class="line"> var c8 = _.map(users,o=&gt;o.user)  //[ &apos;barney&apos;, &apos;fred&apos; ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>uniqueId</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var c9= _.uniqueId(&apos;userId&apos;)  //userId1</span><br><span class="line">var c10 = _.uniqueId(&apos;userId&apos;) //userId2</span><br><span class="line">var c11 = _.uniqueId(&apos;userId&apos;) //userId3</span><br></pre></td></tr></table></figure>
</li>
<li><p>find、filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let F = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;,</span><br><span class="line">    &#123;id: 2, name: &quot;ccc&quot;, age: 25&#125;</span><br><span class="line">];</span><br><span class="line">var sss = _.find(F, [&quot;id&quot;, _.max(_.map(F, &quot;id&quot;))]); //json字符串中某一项最大的</span><br><span class="line">// console.log(sss);  // &#123; id: 2, name: &apos;ccc&apos;, age: 25 &#125;</span><br><span class="line">var ss1 = _.find(F, [&quot;id&quot;, 2]) // &#123; id: 2, name: &apos;ccc&apos;, age: 25 &#125;</span><br><span class="line">// console.log(ss1);</span><br><span class="line">var ss2 = _.filter(F, [&quot;id&quot;, 2])  // [ &#123; id: 2, name: &apos;ccc&apos;, age: 25 &#125; ] 返回一个新的过滤后的数组。</span><br><span class="line">var ss3 = _.filter(F, [&quot;id&quot;, _.max(_.map(F, &quot;id&quot;))])  // [ &#123; id: 2, name: &apos;ccc&apos;, age: 25 &#125; ]</span><br><span class="line"></span><br><span class="line">var d11 = Array.prototype.slice.apply([&quot;a&quot;,&quot;b&quot;]);       </span><br><span class="line">console.log(d11);</span><br><span class="line"></span><br><span class="line">// Array.prototype.slice.call(arguments)</span><br><span class="line">var d13  = new Array(3)</span><br><span class="line">console.log(d13);</span><br></pre></td></tr></table></figure>
</li>
<li><p>compact</p>
</li>
</ol>
<ul>
<li>数组去空（去除false, null, 0, “”, undefined, 和 NaN）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([0, 1, false, 2, &apos;&apos;, 3]);</span><br><span class="line">// =&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li>最后，还有一个<strong>特别好用</strong>的方法_.groupBy()<br>使用场景如下图：我需要将数组中每个对象按照id相同的，组成一个二维数组</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5120924-cbc8d64a210df014.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>将上图转换成下图这种数据格式：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5120924-b7347a54bce05117.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ol>
<li>使用_.groupBy()得到如下图的数据结构：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var courseGroup = _.groupBy(arr, &apos;lesson.courseSession.objectId&apos;)</span><br><span class="line">或</span><br><span class="line">var courseGroup = _.groupBy(arr, e =&gt; &#123;</span><br><span class="line">  return e.lesson.courseSession.objectId</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/5120924-d96a5a39184e2829.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ol start="2">
<li>使用Object.values()即可得到啦 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var finalData = Object.values(courseGroup)</span><br></pre></td></tr></table></figure>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/javascript/">javascript</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/lodash/">lodash</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2017-2018 苏瑾诺</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>